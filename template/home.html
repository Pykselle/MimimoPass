<!DOCTYPE html>
<html>
<title>Mimimo Pass</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/w3.css">
<link rel="stylesheet" href="/css/w3-theme-blue-grey.css">
<link rel="stylesheet" href="/font-awesome/css/solid.css">
<link rel="stylesheet" href="/font-awesome/css/fontawesome.css">

<body>

    <header class="w3-container w3-theme w3-xxxlarge">
        <div class="w3-cell w3-padding">
            <i class="fas fa-hippo"></i>
        </div>
        <div class="w3-cell w3-padding">
            Mimimo Pass
        </div>
    </header>

    <div class="w3-container w3-margin-top">
        <table class="w3-table-all w3-hoverable">

            {{range $i, $a := .Apps}}
            <tr style="height:60px" class="w3-hover-theme-light">
                <p>
                    <form id="form_{{$a.AppName}}" method="post" action="/">
                        <td class="w3-col" style="width:150px">
                            <label>
                                <i class="fas fa-angle-double-right w3-text-theme"></i>
                                {{$a.AppName}}
                            </label>
                        </td>

                        <td class="w3-col" style="width:80px">
                            <a href="/?delete={{$a.AppName}}">
                                <i class="fas fa-trash-alt w3-text-theme"></i>
                            </a>
                        </td>

                        <td class="w3-col" style="width:80px">
                            <div onclick="document.getElementById('inputPassPhrase_{{$a.AppName}}').style.display='block'">
                                <i class="fas fa-key w3-text-theme"></i>
                            </div>
                        </td>

                        <td class="w3-rest w3-left">
                            <div id="inputPassPhrase_{{$a.AppName}}" style="display:none" class="w3-cell-row">
                                <div class="w3-cell w3-cell-middle">
                                    <input name="passphrase" class="w3-input w3-border w3-round" type="password"
                                        placeholder="Enter passphrase">
                                </div>
                                <div class="w3-cell w3-cell-middle  w3-padding">
                                        <div onclick="document.getElementById('form_{{$a.AppName}}').submit()">
                                            <i class="fas fa-check w3-text-theme"></i>
                                        </div>
                                </div>
                                <div class="w3-cell w3-cell-middle w3-padding" onclick="document.getElementById('inputPassPhrase_{{$a.AppName}}').style.display='none'">
                                    <i class="fas fa-times w3-text-theme"></i>
                                </div>
                            </div>
                            {{ if eq $a.AppName $.SelectedApp }}
                            <div class="w3-cell-row">
                                <input id="pass" value="{{$.Pass}}" type="password" style="padding:8px" class="w3-input w3-border w3-round w3-cell w3-cell-middle"
                                    readonly />
                                <div class="w3-cell w3-cell-middle" onclick="document.getElementById('pass').type='text';document.getElementById('pass_hide').style.display='block';document.getElementById('pass_view').style.display='none'">
                                    <i id="pass_view" class="fas fa-eye w3-text-theme" style="padding:8px"></i>
                                </div>
                                <div class="w3-cell w3-cell-middle" onclick="document.getElementById('pass').type='password';document.getElementById('pass_view').style.display='block';document.getElementById('pass_hide').style.display='none'">
                                    <i id="pass_hide" class="fas fa-eye-slash w3-text-theme" style="display:none;padding:8px"></i>
                                </div>
                                <div class="w3-cell w3-cell-middle" style="padding:8px">
                                    <i class="fas fa-clipboard w3-text-theme" onclick="let initial_state=document.getElementById('pass').type;document.getElementById('pass').type='text';document.getElementById('pass').select();document.execCommand('copy');document.getElementById('pass').type=initial_state;"></i>
                                </div>
                            </div>
                            {{ end }}
                        </td>

                        <td>
                            <input name="app" value="{{$a.AppName}}" type="hidden" />
                        </td>

                    </form>
                </p>
            </tr>

            {{ end }}
        </table>

        <p>
            <div onclick="document.getElementById('modalNewApp').style.display='block'">
                <i class="fa fa-plus-square w3-text-theme"></i>
                Add new app
            </div>
        </p>
    </div>

    {{template "modalNewApp.html"}}

</body>

</html>